<% layout('layouts/boilerplate') %>
    <h1><%= list.listTitle %></h1>
    <% if(list.listOfMovies.length > 0) { %>
        <% for(let movie of list.listOfMovies) { %>
        <div class="card mb-3 ">
          <div class="card-body">
            <h5 class="card-title"><%= movie.movieTitle %></h5>
            <h6 class="card-subtitle mb-2 text-muted">Submitted by <%= movie.movieAuthor.username %></h6>
            <p class="card-text">Description: <%= movie.movieDescription %></p>
            <% if (currentUser && movie.movieAuthor.equals(currentUser._id)) { %>
              <form action="/list/<%=list._id%>/movies/<%=movie._id%>?_method=DELETE" method="POST">
                <button class="btn btn-sm btn-danger">Delete</button>
              </form>
            <% } %>
          </div>
        </div>
        <% } %>
        <% } %>

    <div class="col-6">
        <% if(currentUser) { %>
        <h2>Add a Movie</h2>
        <form class="mb-3 needs-validation" action="/lists/<%= list._id %>/movie" method="POST" novalidate>
          <% console.log(list._id) %>
          <div class="mb-3">
            <label for="movieTitle">Movie Title</label>
            <input type="text" name="movie[movieTitle]" id="movieTitle">
          </div>
          <div class="mb-3">
            <label for="movieDescription">Description</label>
            <input type="text" name="movie[movieDescription]" id="movieDescription" required>
          </div>
          <button class="btn btn-success">Add Movie</button>
        </form>
        <% } %>
        
      </div>
    </div>